var pixi_projection,__extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();!function(a){var b=function(){function a(a,b){void 0===b&&(b=!0),this._enabled=!1,this.legacy=a,b&&(this.enabled=!0),this.legacy.proj=this}return Object.defineProperty(a.prototype,"enabled",{get:function(){return this._enabled},set:function(a){this._enabled=a},enumerable:!0,configurable:!0}),a.prototype.clear=function(){},a}();a.Projection=b}(pixi_projection||(pixi_projection={})),function(a){var b;!function(a){var b=function(){function a(a){this.vertices=new ArrayBuffer(a),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return a.prototype.destroy=function(){this.vertices=null},a}();a.BatchBuffer=b}(b=a.webgl||(a.webgl={}))}(pixi_projection||(pixi_projection={})),function(a){var b;!function(a){function b(a,b,d,e){var f,g,h;for(b=b.replace(/%count%/gi,e+""),b=b.replace(/%forloop%/gi,c(e)),f=new PIXI.Shader(d,a,b),g=new Int32Array(e),h=0;e>h;h++)g[h]=h;return f.bind(),f.uniforms.uSamplers=g,f}function c(a){var c,b="";for(b+="\n",b+="\n",c=0;a>c;c++)c>0&&(b+="\nelse "),a-1>c&&(b+="if(textureId == "+c+".0)"),b+="\n{",b+="\n	color = texture2D(uSamplers["+c+"], textureCoord);",b+="\n}";return b+="\n",b+="\n"}a.generateMultiTextureShader=b}(b=a.webgl||(a.webgl={}))}(pixi_projection||(pixi_projection={})),function(a){var b;!function(b){var j,c=PIXI.ObjectRenderer,d=PIXI.settings,e=PIXI.glCore.GLBuffer,f=PIXI.utils.premultiplyTint,g=PIXI.utils.premultiplyBlendMode,h=0,i=function(){function a(){this.textures=[],this.textureCount=0,this.ids=[],this.size=0,this.start=0,this.blend=PIXI.BLEND_MODES.NORMAL,this.uniforms=null}return a}();b.BatchGroup=i,j=function(c){function j(b){var f,e=c.call(this,b)||this;for(e.shaderVert="",e.shaderFrag="",e.MAX_TEXTURES_LOCAL=32,e.vertSize=5,e.vertByteSize=4*e.vertSize,e.size=d.SPRITE_BATCH_SIZE,e.currentIndex=0,e.sprites=[],e.vertexBuffers=[],e.vaos=[],e.vaoMax=2,e.vertexCount=0,e.MAX_TEXTURES=1,e.indices=a.utils.createIndicesForQuads(e.size),e.groups=[],f=0;f<e.size;f++)e.groups[f]=new i;return e.vaoMax=2,e.vertexCount=0,e.renderer.on("prerender",e.onPrerender,e),e}return __extends(j,c),j.prototype.getUniforms=function(){return null},j.prototype.syncUniforms=function(a){var b,c;if(a){b=this.shader;for(c in a)b.uniforms[c]=a[c]}},j.prototype.onContextChange=function(){var f,g,c=this.renderer.gl;for(this.MAX_TEXTURES=Math.min(this.MAX_TEXTURES_LOCAL,this.renderer.plugins["sprite"].MAX_TEXTURES),this.shader=b.generateMultiTextureShader(this.shaderVert,this.shaderFrag,c,this.MAX_TEXTURES),this.indexBuffer=e.createIndexBuffer(c,this.indices,c.STATIC_DRAW),this.renderer.bindVao(null),this.shader.attributes,f=0;f<this.vaoMax;f++)g=this.vertexBuffers[f]=e.createVertexBuffer(c,null,c.STREAM_DRAW),this.vaos[f]=this.createVao(g);if(!this.buffers)for(this.buffers=[],f=1;f<=a.utils.nextPow2(this.size);f*=2)this.buffers.push(new b.BatchBuffer(4*f*this.vertByteSize));this.vao=this.vaos[0]},j.prototype.onPrerender=function(){this.vertexCount=0},j.prototype.render=function(a){this.currentIndex>=this.size&&this.flush(),a._texture._uvs&&a._texture.baseTexture&&(this.sprites[this.currentIndex++]=a)},j.prototype.flush=function(){var b,c,i,j,k,l,m,n,o,p,q,r,s,t,u,v,y,z,A,B,C,D,E,G,H,I,J,K;if(0!==this.currentIndex){for(b=this.renderer.gl,c=this.MAX_TEXTURES,i=a.utils.nextPow2(this.currentIndex),j=a.utils.log2(i),k=this.buffers[j],l=this.sprites,m=this.groups,n=k.float32View,o=k.uint32View,p=0,s=null,t=1,u=0,v=m[0],y=g[l[0]._texture.baseTexture.premultipliedAlpha?1:0][l[0].blendMode],v.textureCount=0,v.start=0,v.blend=y,h++,z=0;z<this.currentIndex;++z)A=l[z],q=A._texture.baseTexture,B=g[Number(q.premultipliedAlpha)][A.blendMode],y!==B&&(y=B,r=null,u=c,h++),C=this.getUniforms(A),s!==C&&(s=C,r=null,u=c,h++),r!==q&&(r=q,q._enabled!==h&&(u===c&&(h++,u=0,v.size=z-v.start,v=m[t++],v.textureCount=0,v.blend=y,v.start=z,v.uniforms=s),q._enabled=h,q._virtalBoundId=u,v.textures[v.textureCount++]=q,u++)),D=Math.min(A.worldAlpha,1),E=1>D&&q.premultipliedAlpha?f(A._tintRGB,D):A._tintRGB+(255*D<<24),this.fillVertices(n,o,p,A,E,q._virtalBoundId),p+=4*this.vertSize;for(v.size=z-v.start,d.CAN_UPLOAD_SAME_BUFFER?this.vertexBuffers[this.vertexCount].upload(k.vertices,0,!0):(this.vaoMax<=this.vertexCount&&(this.vaoMax++,this.shader.attributes,G=this.vertexBuffers[this.vertexCount]=e.createVertexBuffer(b,null,b.STREAM_DRAW),this.vaos[this.vertexCount]=this.createVao(G)),this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(k.vertices,0,!1),this.vertexCount++),s=null,z=0;t>z;z++){for(H=m[z],I=H.textureCount,H.uniforms!==s&&this.syncUniforms(H.uniforms),J=0;I>J;J++)this.renderer.bindTexture(H.textures[J],J,!0),K=this.shader.uniforms.samplerSize,K&&(K[0]=H.textures[J].realWidth,K[1]=H.textures[J].realHeight,this.shader.uniforms.samplerSize=K);this.renderer.state.setBlendMode(H.blend),b.drawElements(b.TRIANGLES,6*H.size,b.UNSIGNED_SHORT,2*6*H.start)}this.currentIndex=0}},j.prototype.start=function(){this.renderer.bindShader(this.shader),d.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},j.prototype.stop=function(){this.flush()},j.prototype.destroy=function(){var a;for(a=0;a<this.vaoMax;a++)this.vertexBuffers[a]&&this.vertexBuffers[a].destroy(),this.vaos[a]&&this.vaos[a].destroy();for(this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),c.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null,a=0;a<this.buffers.length;++a)this.buffers[a].destroy()},j}(c),b.MultiTextureSpriteRenderer=j}(b=a.webgl||(a.webgl={}))}(pixi_projection||(pixi_projection={})),function(a){var b=[new PIXI.Point,new PIXI.Point,new PIXI.Point,new PIXI.Point],c=[0,0,0,0],d=function(){function a(){this.surfaceID="default",this._updateID=0,this.vertexSrc="",this.fragmentSrc=""}return a.prototype.fillUniforms=function(){},a.prototype.clear=function(){},a.prototype.boundsQuad=function(a,d,e){var j,k,l,m,f=d[0],g=d[1],h=d[0],i=d[1];for(j=2;8>j;j+=2)f>d[j]&&(f=d[j]),h<d[j]&&(h=d[j]),g>d[j+1]&&(g=d[j+1]),i<d[j+1]&&(i=d[j+1]);if(b[0].set(f,g),this.apply(b[0],b[0]),b[1].set(h,g),this.apply(b[1],b[1]),b[2].set(h,i),this.apply(b[2],b[2]),b[3].set(f,i),this.apply(b[3],b[3]),e)e.apply(b[0],b[0]),e.apply(b[1],b[1]),e.apply(b[2],b[2]),e.apply(b[3],b[3]),d[0]=b[0].x,d[1]=b[0].y,d[2]=b[1].x,d[3]=b[1].y,d[4]=b[2].x,d[5]=b[2].y,d[6]=b[3].x,d[7]=b[3].y;else{for(j=1;3>=j;j++)(b[j].y<b[0].y||b[j].y==b[0].y&&b[j].x<b[0].x)&&(k=b[0],b[0]=b[j],b[j]=k);for(j=1;3>=j;j++)c[j]=Math.atan2(b[j].y-b[0].y,b[j].x-b[0].x);for(j=1;3>=j;j++)for(l=j+1;3>=l;l++)c[j]>c[l]&&(k=b[j],b[j]=b[l],b[l]=k,m=c[j],c[j]=c[l],c[l]=m);if(d[0]=b[0].x,d[1]=b[0].y,d[2]=b[1].x,d[3]=b[1].y,d[4]=b[2].x,d[5]=b[2].y,d[6]=b[3].x,d[7]=b[3].y,(b[3].x-b[2].x)*(b[1].y-b[2].y)-(b[1].x-b[2].x)*(b[3].y-b[2].y)<0)return d[4]=b[3].x,d[5]=b[3].y,void 0}},a}();a.Surface=d}(pixi_projection||(pixi_projection={})),function(a){var b=new PIXI.Matrix,c=new PIXI.Rectangle,d=new PIXI.Point,e=function(a){function e(){var b=a.call(this)||this;return b.distortion=new PIXI.Point,b}return __extends(e,a),e.prototype.clear=function(){this.distortion.set(0,0)},e.prototype.apply=function(a,b){var c,d;return b=b||new PIXI.Point,c=this.distortion,d=a.x*a.y,b.x=a.x+c.x*d,b.y=a.y+c.y*d,b},e.prototype.applyInverse=function(a,b){var c,d,e,f,g,h;if(b=b||new PIXI.Point,c=a.x,d=a.y,e=this.distortion.x,f=this.distortion.y,0==e)b.x=c,b.y=d/(1+f*c);else if(0==f)b.y=d,b.x=c/(1+e*d);else{if(g=.5*(d*e-c*f+1)/f,h=g*g+c/f,1e-5>=h)return b.set(0/0,0/0),void 0;b.x=f>0?-g+Math.sqrt(h):-g-Math.sqrt(h),b.y=(c/b.x-1)/e}return b},e.prototype.mapSprite=function(a,b,d){var e=a.texture;return c.x=-a.anchor.x*e.orig.width,c.y=-a.anchor.y*e.orig.height,c.width=e.orig.width,c.height=e.orig.height,this.mapQuad(c,b,d||a.transform)},e.prototype.mapQuad=function(a,c,e){var f=-a.x/a.width,g=-a.y/a.height,h=(1-a.x)/a.width,i=(1-a.y)/a.height,j=c[0].x*(1-f)+c[1].x*f,k=c[0].y*(1-f)+c[1].y*f,l=c[0].x*(1-h)+c[1].x*h,m=c[0].y*(1-h)+c[1].y*h,n=c[3].x*(1-f)+c[2].x*f,o=c[3].y*(1-f)+c[2].y*f,p=c[3].x*(1-h)+c[2].x*h,q=c[3].y*(1-h)+c[2].y*h,r=j*(1-g)+n*g,s=k*(1-g)+o*g,t=l*(1-g)+p*g,u=m*(1-g)+q*g,v=j*(1-i)+n*i,w=k*(1-i)+o*i,x=l*(1-i)+p*i,y=m*(1-i)+q*i,z=b;return z.tx=r,z.ty=s,z.a=t-r,z.b=u-s,z.c=v-r,z.d=w-s,d.set(x,y),z.applyInverse(d,d),this.distortion.set(d.x-1,d.y-1),e.setFromMatrix(z),this},e.prototype.fillUniforms=function(a){var b,c;a.distortion=a.distortion||new Float32Array([0,0,0,0]),b=Math.abs(this.distortion.x),c=Math.abs(this.distortion.y),a.distortion[0]=c>=1e4*b?0:this.distortion.x,a.distortion[1]=b>=1e4*c?0:this.distortion.y,a.distortion[2]=1/a.distortion[0],a.distortion[3]=1/a.distortion[1]},e}(a.Surface);a.BilinearSurface=e}(pixi_projection||(pixi_projection={})),function(a){var b=function(b){function c(c){var d=b.call(this,c)||this;return d.proj=new a.ProjectionSurface(d.transform),d}return __extends(c,b),Object.defineProperty(c.prototype,"worldTransform",{get:function(){return this.proj},enumerable:!0,configurable:!0}),c}(PIXI.Sprite);a.Container2s=b}(pixi_projection||(pixi_projection={})),function(a){function c(a){var c=this.proj,d=a.proj,e=this;return d?d._surface?(c._activeProjection=d,this.updateLocalTransform(),this.localTransform.copy(this.worldTransform),e._parentID<0&&++e._worldID,void 0):(b.call(this,a),c._activeProjection=d._activeProjection,void 0):(b.call(this,a),c._activeProjection=null,void 0)}var b=PIXI.TransformStatic.prototype.updateTransform,d=function(b){function d(a,c){var d=b.call(this,a,c)||this;return d._surface=null,d._activeProjection=null,d._currentSurfaceID=-1,d._currentLegacyID=-1,d._lastUniforms=null,d}return __extends(d,b),Object.defineProperty(d.prototype,"enabled",{set:function(a){a!==this._enabled&&(this._enabled=a,a?(this.legacy.updateTransform=c,this.legacy._parentID=-1):(this.legacy.updateTransform=PIXI.TransformStatic.prototype.updateTransform,this.legacy._parentID=-1))},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"surface",{get:function(){return this._surface},set:function(a){this._surface!=a&&(this._surface=a||null,this.legacy._parentID=-1)},enumerable:!0,configurable:!0}),d.prototype.applyPartial=function(a,b){return null!==this._activeProjection?(b=this.legacy.worldTransform.apply(a,b),this._activeProjection.surface.apply(b,b)):null!==this._surface?this.surface.apply(a,b):this.legacy.worldTransform.apply(a,b)},d.prototype.apply=function(a,b){return null!==this._activeProjection?(b=this.legacy.worldTransform.apply(a,b),this._activeProjection.surface.apply(b,b),this._activeProjection.legacy.worldTransform.apply(b,b)):null!==this._surface?(b=this.surface.apply(a,b),this.legacy.worldTransform.apply(b,b)):this.legacy.worldTransform.apply(a,b)},d.prototype.applyInverse=function(a,b){return null!==this._activeProjection?(b=this._activeProjection.legacy.worldTransform.applyInverse(a,b),this._activeProjection._surface.applyInverse(b,b),this.legacy.worldTransform.applyInverse(b,b)):null!==this._surface?(b=this.legacy.worldTransform.applyInverse(a,b),this._surface.applyInverse(b,b)):this.legacy.worldTransform.applyInverse(a,b)},d.prototype.mapBilinearSprite=function(b,c){this._surface instanceof a.BilinearSurface||(this.surface=new a.BilinearSurface),this.surface.mapSprite(b,c,this.legacy)},d.prototype.clear=function(){this.surface&&this.surface.clear()},Object.defineProperty(d.prototype,"uniforms",{get:function(){return this._currentLegacyID===this.legacy._worldID&&this._currentSurfaceID===this.surface._updateID?this._lastUniforms:(this._lastUniforms=this._lastUniforms||{},this._lastUniforms.worldTransform=this.legacy.worldTransform.toArray(!0),this._surface.fillUniforms(this._lastUniforms),this._lastUniforms)},enumerable:!0,configurable:!0}),d}(a.Projection);a.ProjectionSurface=d}(pixi_projection||(pixi_projection={})),function(a){var b=a.webgl.MultiTextureSpriteRenderer,c=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.size=100,b.MAX_TEXTURES_LOCAL=1,b.shaderVert="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec3 aTrans1;\nattribute vec3 aTrans2;\nattribute vec4 aFrame;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 worldTransform;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vTrans1;\nvarying vec3 vTrans2;\nvarying vec4 vFrame;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position.xyw = projectionMatrix * worldTransform * vec3(aVertexPosition, 1.0);\n    gl_Position.z = 0.0;\n    \n    vTextureCoord = aVertexPosition;\n    vTrans1 = aTrans1;\n    vTrans2 = aTrans2;\n    vTextureId = aTextureId;\n    vColor = aColor;\n    vFrame = aFrame;\n}\n",b.shaderFrag="precision highp float;\nvarying vec2 vTextureCoord;\nvarying vec3 vTrans1;\nvarying vec3 vTrans2;\nvarying vec4 vFrame;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nuniform sampler2D uSamplers[%count%];\nuniform vec2 samplerSize[%count%]; \nuniform vec4 distortion;\n\nvoid main(void){\nvec2 surface;\nvec2 surface2;\n\nfloat vx = vTextureCoord.x;\nfloat vy = vTextureCoord.y;\nfloat dx = distortion.x;\nfloat dy = distortion.y;\nfloat revx = distortion.z;\nfloat revy = distortion.w;\n\nif (distortion.x == 0.0) {\n    surface.x = vx;\n    surface.y = vy / (1.0 + dy * vx);\n    surface2 = surface;\n} else\nif (distortion.y == 0.0) {\n    surface.y = vy;\n    surface.x = vx/ (1.0 + dx * vy);\n    surface2 = surface;\n} else {\n    float c = vy * dx - vx * dy;\n    float b = (c + 1.0) * 0.5;\n    float b2 = (-c + 1.0) * 0.5;\n    float d = b * b + vx * dy;\n    if (d < -0.00001) {\n        discard;\n    }\n    d = sqrt(max(d, 0.0));\n    surface.x = (- b + d) * revy;\n    surface2.x = (- b - d) * revy;\n    surface.y = (- b2 + d) * revx;\n    surface2.y = (- b2 - d) * revx;\n}\n\nvec2 uv;\nuv.x = vTrans1.x * surface.x + vTrans1.y * surface.y + vTrans1.z;\nuv.y = vTrans2.x * surface.x + vTrans2.y * surface.y + vTrans2.z;\n\nvec2 pixels = uv * samplerSize[0];\n\nif (pixels.x < vFrame.x || pixels.x > vFrame.z ||\n    pixels.y < vFrame.y || pixels.y > vFrame.w) {\n    uv.x = vTrans1.x * surface2.x + vTrans1.y * surface2.y + vTrans1.z;\n    uv.y = vTrans2.x * surface2.x + vTrans2.y * surface2.y + vTrans2.z;\n    pixels = uv * samplerSize[0];\n    \n    if (pixels.x < vFrame.x || pixels.x > vFrame.z ||\n        pixels.y < vFrame.y || pixels.y > vFrame.w) {\n        discard;\n    }\n}\n\nvec4 edge;\nedge.xy = clamp(pixels - vFrame.xy + 0.5, vec2(0.0, 0.0), vec2(1.0, 1.0));\nedge.zw = clamp(vFrame.zw - pixels + 0.5, vec2(0.0, 0.0), vec2(1.0, 1.0));\n\nfloat alpha = 1.0; //edge.x * edge.y * edge.z * edge.w;\nvec4 rColor = vColor * alpha;\n\nfloat textureId = floor(vTextureId+0.5);\nvec4 color;\nvec2 textureCoord = uv;\n%forloop%\ngl_FragColor = color * rColor;\n}",b.defUniforms={worldTransform:new Float32Array([1,0,0,0,1,0,0,0,1]),distortion:new Float32Array([0,0])},b}return __extends(b,a),b.prototype.getUniforms=function(a){var b=a.proj;return this.shader,null!==b.surface?b.uniforms:null!==b._activeProjection?b._activeProjection.uniforms:this.defUniforms},b.prototype.createVao=function(a){var c,d,b=this.shader.attributes;return this.vertSize=14,this.vertByteSize=4*this.vertSize,c=this.renderer.gl,d=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(a,b.aVertexPosition,c.FLOAT,!1,this.vertByteSize,0).addAttribute(a,b.aTrans1,c.FLOAT,!1,this.vertByteSize,8).addAttribute(a,b.aTrans2,c.FLOAT,!1,this.vertByteSize,20).addAttribute(a,b.aFrame,c.FLOAT,!1,this.vertByteSize,32).addAttribute(a,b.aColor,c.UNSIGNED_BYTE,!0,this.vertByteSize,48),b.aTextureId&&d.addAttribute(a,b.aTextureId,c.FLOAT,!1,this.vertByteSize,52),d},b.prototype.fillVertices=function(a,b,c,d,e,f){var m,n,o,g=d.vertexData,h=d._texture;for(h.orig.width,h.orig.height,d._anchor._x,d._anchor._y,m=h._frame,n=d.aTrans,o=0;4>o;o++)a[c]=g[2*o],a[c+1]=g[2*o+1],a[c+2]=n.a,a[c+3]=n.c,a[c+4]=n.tx,a[c+5]=n.b,a[c+6]=n.d,a[c+7]=n.ty,a[c+8]=m.x,a[c+9]=m.y,a[c+10]=m.x+m.width,a[c+11]=m.y+m.height,b[c+12]=e,a[c+13]=f,c+=14},b}(b);PIXI.WebGLRenderer.registerPlugin("sprite_bilinear",c)}(pixi_projection||(pixi_projection={})),function(a){PIXI.Sprite.prototype.convertTo2s=function(){this.proj||(this.pluginName="sprite_bilinear",this.aTrans=new PIXI.Matrix,this.calculateVertices=a.Sprite2s.prototype.calculateVertices,this.calculateTrimmedVertices=a.Sprite2s.prototype.calculateTrimmedVertices,this._calculateBounds=a.Sprite2s.prototype._calculateBounds,PIXI.Container.prototype.convertTo2s.call(this))},PIXI.Container.prototype.convertTo2s=function(){this.proj||(this.proj=new a.Projection2d(this.transform),Object.defineProperty(this,"worldTransform",{get:function(){return this.proj},enumerable:!0,configurable:!0}))},PIXI.Container.prototype.convertSubtreeTo2s=function(){this.convertTo2s();for(var a=0;a<this.children.length;a++)this.children[a].convertSubtreeTo2s()}}(pixi_projection||(pixi_projection={})),function(a){var b=function(b){function c(c){var d=b.call(this,c)||this;return d.aTrans=new PIXI.Matrix,d.proj=new a.ProjectionSurface(d.transform),d.pluginName="sprite_bilinear",d}return __extends(c,b),c.prototype._calculateBounds=function(){this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)},c.prototype.calculateVertices=function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,a=this.transform._worldID,b=this._texture._updateID;(this._transformID!==a||this._textureID!==b)&&(this._transformID=a,this._textureID=b,c=this._texture,d=this.vertexData,e=c.trim,f=c.orig,g=this._anchor,h=0,i=0,j=0,k=0,e?(i=e.x-g._x*f.width,h=i+e.width,k=e.y-g._y*f.height,j=k+e.height):(i=-g._x*f.width,h=i+f.width,k=-g._y*f.height,j=k+f.height),this.proj._surface?(d[0]=i,d[1]=k,d[2]=h,d[3]=k,d[4]=h,d[5]=j,d[6]=i,d[7]=j,this.proj._surface.boundsQuad(d,d)):(l=this.transform.worldTransform,m=l.a,n=l.b,o=l.c,p=l.d,q=l.tx,r=l.ty,d[0]=m*i+o*k+q,d[1]=p*k+n*i+r,d[2]=m*h+o*k+q,d[3]=p*k+n*h+r,d[4]=m*h+o*j+q,d[5]=p*j+n*h+r,d[6]=m*i+o*j+q,d[7]=p*j+n*i+r,this.proj._activeProjection&&this.proj._activeProjection.surface.boundsQuad(d,d)),c.transform||(c.transform=new PIXI.extras.TextureTransform(c)),c.transform.update(),s=this.aTrans,s.set(f.width,0,0,f.height,i,k),null===this.proj._surface&&s.prepend(this.transform.worldTransform),s.invert(),s.prepend(c.transform.mapCoord))},c.prototype.calculateTrimmedVertices=function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,a=this.transform._worldID,b=this._texture._updateID;if(this.vertexTrimmedData){if(this._transformTrimmedID===a&&this._textureTrimmedID===b)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=a,this._textureTrimmedID=b,c=this._texture,d=this.vertexTrimmedData,e=c.orig,f=this._anchor,g=-f._x*e.width,h=g+e.width,i=-f._y*e.height,j=i+e.height,this.proj._surface?(d[0]=g,d[1]=i,d[2]=h,d[3]=i,d[4]=h,d[5]=j,d[6]=g,d[7]=j,this.proj._surface.boundsQuad(d,d,this.transform.worldTransform)):(k=this.transform.worldTransform,l=k.a,m=k.b,n=k.c,o=k.d,p=k.tx,q=k.ty,d[0]=l*g+n*i+p,d[1]=o*i+m*g+q,d[2]=l*h+n*i+p,d[3]=o*i+m*h+q,d[4]=l*h+n*j+p,d[5]=o*j+m*h+q,d[6]=l*g+n*j+p,d[7]=o*j+m*g+q,this.proj._activeProjection&&this.proj._activeProjection.surface.boundsQuad(d,d,this.proj._activeProjection.legacy.worldTransform))},Object.defineProperty(c.prototype,"worldTransform",{get:function(){return this.proj},enumerable:!0,configurable:!0}),c}(PIXI.Sprite);a.Sprite2s=b}(pixi_projection||(pixi_projection={})),function(a){var b=function(b){function c(c,d,e){var f=b.call(this,c,d,e)||this;return f.aTrans=new PIXI.Matrix,f.proj=new a.ProjectionSurface(f.transform),f.pluginName="sprite_bilinear",f}return __extends(c,b),Object.defineProperty(c.prototype,"worldTransform",{get:function(){return this.proj},enumerable:!0,configurable:!0}),c}(PIXI.Text);a.Text2s=b,b.prototype.calculateVertices=a.Sprite2s.prototype.calculateVertices,b.prototype.calculateTrimmedVertices=a.Sprite2s.prototype.calculateTrimmedVertices,b.prototype._calculateBounds=a.Sprite2s.prototype._calculateBounds}(pixi_projection||(pixi_projection={})),function(a){var b=a.webgl.MultiTextureSpriteRenderer,c=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.size=100,b.MAX_TEXTURES_LOCAL=1,b.shaderVert="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec3 aTrans1;\nattribute vec3 aTrans2;\nattribute vec4 aFrame;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 worldTransform;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vTrans1;\nvarying vec3 vTrans2;\nvarying vec4 vFrame;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position.xyw = projectionMatrix * worldTransform * vec3(aVertexPosition, 1.0);\n    gl_Position.z = 0.0;\n    \n    vTextureCoord = aVertexPosition;\n    vTrans1 = aTrans1;\n    vTrans2 = aTrans2;\n    vTextureId = aTextureId;\n    vColor = aColor;\n    vFrame = aFrame;\n}\n",b.shaderFrag="precision highp float;\nvarying vec2 vTextureCoord;\nvarying vec3 vTrans1;\nvarying vec3 vTrans2;\nvarying vec4 vFrame;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nuniform sampler2D uSamplers[%count%];\nuniform vec2 samplerSize[%count%]; \nuniform vec4 params;\n\nvoid main(void){\nvec2 surface;\n\nfloat vx = vTextureCoord.x;\nfloat vy = vTextureCoord.y;\nfloat aleph = params.x;\nfloat bet = params.y;\nfloat A = params.z;\nfloat B = params.w;\n\nif (aleph == 0.0) {\n	surface.y = vy / (1.0 + vx * bet);\n	surface.x = vx;\n}\nelse if (bet == 0.0) {\n	surface.x = vx / (1.0 + vy * aleph);\n	surface.y = vy;\n} else {\n	surface.x = vx * (bet + 1.0) / (bet + 1.0 + vy * aleph);\n	surface.y = vy * (aleph + 1.0) / (aleph + 1.0 + vx * bet);\n}\n\nvec2 uv;\nuv.x = vTrans1.x * surface.x + vTrans1.y * surface.y + vTrans1.z;\nuv.y = vTrans2.x * surface.x + vTrans2.y * surface.y + vTrans2.z;\n\nvec2 pixels = uv * samplerSize[0];\n\nvec4 edge;\nedge.xy = clamp(pixels - vFrame.xy + 0.5, vec2(0.0, 0.0), vec2(1.0, 1.0));\nedge.zw = clamp(vFrame.zw - pixels + 0.5, vec2(0.0, 0.0), vec2(1.0, 1.0));\n\nfloat alpha = edge.x * edge.y * edge.z * edge.w;\nvec4 rColor = vColor * alpha;\n\nfloat textureId = floor(vTextureId+0.5);\nvec4 color;\nvec2 textureCoord = uv;\n%forloop%\ngl_FragColor = color * rColor;\n}",b.defUniforms={worldTransform:new Float32Array([1,0,0,0,1,0,0,0,1]),distortion:new Float32Array([0,0])},b}return __extends(b,a),b.prototype.getUniforms=function(a){var b=a.proj;return this.shader,null!==b.surface?b.uniforms:null!==b._activeProjection?b._activeProjection.uniforms:this.defUniforms},b.prototype.createVao=function(a){var c,d,b=this.shader.attributes;return this.vertSize=14,this.vertByteSize=4*this.vertSize,c=this.renderer.gl,d=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(a,b.aVertexPosition,c.FLOAT,!1,this.vertByteSize,0).addAttribute(a,b.aTrans1,c.FLOAT,!1,this.vertByteSize,8).addAttribute(a,b.aTrans2,c.FLOAT,!1,this.vertByteSize,20).addAttribute(a,b.aFrame,c.FLOAT,!1,this.vertByteSize,32).addAttribute(a,b.aColor,c.UNSIGNED_BYTE,!0,this.vertByteSize,48),b.aTextureId&&d.addAttribute(a,b.aTextureId,c.FLOAT,!1,this.vertByteSize,52),d},b.prototype.fillVertices=function(a,b,c,d,e,f){var m,n,o,g=d.vertexData,h=d._texture;for(h.orig.width,h.orig.height,d._anchor._x,d._anchor._y,m=h._frame,n=d.aTrans,o=0;4>o;o++)a[c]=g[2*o],a[c+1]=g[2*o+1],a[c+2]=n.a,a[c+3]=n.c,a[c+4]=n.tx,a[c+5]=n.b,a[c+6]=n.d,a[c+7]=n.ty,a[c+8]=m.x,a[c+9]=m.y,a[c+10]=m.x+m.width,a[c+11]=m.y+m.height,b[c+12]=e,a[c+13]=f,c+=14},b}(b);PIXI.WebGLRenderer.registerPlugin("sprite_strange",c)}(pixi_projection||(pixi_projection={})),function(a){var b=new PIXI.Matrix,c=new PIXI.Rectangle,d=new PIXI.Point,e=function(a){function e(){var b=a.call(this)||this;return b.params=[0,0,0/0,0/0],b}return __extends(e,a),e.prototype.clear=function(){var a=this.params;a[0]=0,a[1]=0,a[2]=0/0,a[3]=0/0},e.prototype.setAxisX=function(a,b,c){var h,d=a.x,e=a.y,f=Math.sqrt(d*d+e*e),g=c.rotation;0!==g&&(c.skew._x-=g,c.skew._y+=g,c.rotation=0),c.skew.y=Math.atan2(e,d),h=this.params,h[2]=0!==b?-f*b:0/0,this._calc01()},e.prototype.setAxisY=function(a,b,c){var h,d=a.x,e=a.y,f=Math.sqrt(d*d+e*e),g=c.rotation;0!==g&&(c.skew._x-=g,c.skew._y+=g,c.rotation=0),c.skew.x=-Math.atan2(e,d)+Math.PI/2,h=this.params,h[3]=0!==b?-f*b:0/0,this._calc01()},e.prototype._calc01=function(){var b,a=this.params;isNaN(a[2])?(a[1]=0,a[0]=isNaN(a[3])?0:1/a[3]):isNaN(a[3])?(a[0]=0,a[1]=1/a[2]):(b=1-a[2]*a[3],a[0]=(1-a[2])/b,a[1]=(1-a[3])/b)},e.prototype.apply=function(a,b){var c,d,e,f,g,h,i;return b=b||new PIXI.Point,c=this.params[0],d=this.params[1],e=this.params[2],f=this.params[3],g=a.x,h=a.y,0===c?(b.y=h*(1+g*d),b.x=g):0===d?(b.x=g*(1+h*c),b.y=h):(i=e*f-h*g,b.x=e*g*(f+h)/i,b.y=f*h*(e+g)/i),b},e.prototype.applyInverse=function(a,b){var c,d,g,h;return b=b||new PIXI.Point,c=this.params[0],d=this.params[1],this.params[2],this.params[3],g=a.x,h=a.y,0===c?(b.y=h/(1+g*d),b.x=g):0===d?(b.x=g*(1+h*c),b.y=h):(b.x=g*(d+1)/(d+1+h*c),b.y=h*(c+1)/(c+1+g*d)),b},e.prototype.mapSprite=function(a,b,d){var e=a.texture;return c.x=-a.anchor.x*e.orig.width,c.y=-a.anchor.y*e.orig.height,c.width=e.orig.width,c.height=e.orig.height,this.mapQuad(c,b,d||a.transform)},e.prototype.mapQuad=function(a,c,e){var f=-a.x/a.width,g=-a.y/a.height,h=(1-a.x)/a.width,i=(1-a.y)/a.height,j=c[0].x*(1-f)+c[1].x*f,k=c[0].y*(1-f)+c[1].y*f,l=c[0].x*(1-h)+c[1].x*h,m=c[0].y*(1-h)+c[1].y*h,n=c[3].x*(1-f)+c[2].x*f,o=c[3].y*(1-f)+c[2].y*f,p=c[3].x*(1-h)+c[2].x*h,q=c[3].y*(1-h)+c[2].y*h,r=j*(1-g)+n*g,s=k*(1-g)+o*g,t=l*(1-g)+p*g,u=m*(1-g)+q*g,v=j*(1-i)+n*i,w=k*(1-i)+o*i,x=l*(1-i)+p*i,y=m*(1-i)+q*i,z=b;return z.tx=r,z.ty=s,z.a=t-r,z.b=u-s,z.c=v-r,z.d=w-s,d.set(x,y),z.applyInverse(d,d),e.setFromMatrix(z),this},e.prototype.fillUniforms=function(a){var b=this.params,c=a.params||new Float32Array([0,0,0,0]);a.params=c,c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3]},e}(a.Surface);a.StrangeSurface=e}(pixi_projection||(pixi_projection={})),function(a){function b(){return this.proj.affine?this.transform.worldTransform:this.proj.world}a.container2dWorldTransform=b;var c=function(b){function c(c){var d=b.call(this,c)||this;return d.proj=new a.Projection2d(d.transform),d}return __extends(c,b),Object.defineProperty(c.prototype,"worldTransform",{get:function(){return this.proj.affine?this.transform.worldTransform:this.proj.world},enumerable:!0,configurable:!0}),c}(PIXI.Sprite);a.Container2d=c}(pixi_projection||(pixi_projection={})),function(a){var d,e,b=PIXI.Point,c=[1,0,0,0,1,0,0,0,1];!function(a){a[a["NONE"]=0]="NONE",a[a["FREE"]=1]="FREE",a[a["AXIS_X"]=2]="AXIS_X",a[a["AXIS_Y"]=3]="AXIS_Y",a[a["POINT"]=4]="POINT"}(d=a.AFFINE||(a.AFFINE={})),e=function(){function a(a){this.floatArray=null,this.mat3=new Float64Array(a||c)}return Object.defineProperty(a.prototype,"a",{get:function(){return this.mat3[0]},set:function(a){this.mat3[0]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"b",{get:function(){return this.mat3[1]},set:function(a){this.mat3[1]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"c",{get:function(){return this.mat3[3]},set:function(a){this.mat3[3]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"d",{get:function(){return this.mat3[4]},set:function(a){this.mat3[4]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tx",{get:function(){return this.mat3[6]},set:function(a){this.mat3[6]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"ty",{get:function(){return this.mat3[7]},set:function(a){this.mat3[7]=a},enumerable:!0,configurable:!0}),a.prototype.set=function(a,b,c,d,e,f){var g=this.mat3;return g[0]=a,g[1]=b,g[2]=0,g[3]=c,g[4]=d,g[5]=0,g[6]=e,g[7]=f,g[8]=1,this},a.prototype.toArray=function(a,b){var c,d;return this.floatArray||(this.floatArray=new Float32Array(9)),c=b||this.floatArray,d=this.mat3,a?(c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=d[6],c[7]=d[7],c[8]=d[8]):(c[0]=d[0],c[1]=d[3],c[2]=d[6],c[3]=d[1],c[4]=d[4],c[5]=d[7],c[6]=d[2],c[7]=d[5],c[8]=d[8]),c},a.prototype.apply=function(a,b){var c,d,e,f;return b=b||new PIXI.Point,c=this.mat3,d=a.x,e=a.y,f=1/(c[2]*d+c[5]*e+c[8]),b.x=f*(c[0]*d+c[3]*e+c[6]),b.y=f*(c[1]*d+c[4]*e+c[7]),b},a.prototype.translate=function(a,b){var c=this.mat3;return c[0]+=a*c[2],c[1]+=b*c[2],c[3]+=a*c[5],c[4]+=b*c[5],c[6]+=a*c[8],c[7]+=b*c[8],this},a.prototype.scale=function(a,b){var c=this.mat3;return c[0]*=a,c[1]*=b,c[3]*=a,c[4]*=b,c[6]*=a,c[7]*=b,this},a.prototype.scaleAndTranslate=function(a,b,c,d){var e=this.mat3;e[0]=a*e[0]+c*e[2],e[1]=b*e[1]+d*e[2],e[3]=a*e[3]+c*e[5],e[4]=b*e[4]+d*e[5],e[6]=a*e[6]+c*e[8],e[7]=b*e[7]+d*e[8]},a.prototype.applyInverse=function(a,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;return c=c||new b,d=this.mat3,e=a.x,f=a.y,g=d[0],h=d[3],i=d[6],j=d[1],k=d[4],l=d[7],m=d[2],n=d[5],o=d[8],p=(o*k-l*n)*e+(-o*h+i*n)*f+(l*h-i*k),q=(-o*j+l*m)*e+(o*g-i*m)*f+(-l*g+i*j),r=(n*j-k*m)*e+(-n*g+h*m)*f+(k*g-h*j),c.x=p/r,c.y=q/r,c},a.prototype.invert=function(){var a=this.mat3,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=j*f-g*i,l=-j*e+g*h,m=i*e-f*h,n=b*k+c*l+d*m;return n?(n=1/n,a[0]=k*n,a[1]=(-j*c+d*i)*n,a[2]=(g*c-d*f)*n,a[3]=l*n,a[4]=(j*b-d*h)*n,a[5]=(-g*b+d*e)*n,a[6]=m*n,a[7]=(-i*b+c*h)*n,a[8]=(f*b-c*e)*n,this):this},a.prototype.identity=function(){var a=this.mat3;return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,this},a.prototype.clone=function(){return new a(this.mat3)},a.prototype.copyTo=function(a){var b=this.mat3,c=a.mat3;return c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c[4]=b[4],c[5]=b[5],c[6]=b[6],c[7]=b[7],c[8]=b[8],a},a.prototype.copy=function(a,b){var c=this.mat3,e=1/c[8],f=c[6]*e,g=c[7]*e;a.a=(c[0]-c[2]*f)*e,a.b=(c[1]-c[2]*g)*e,a.c=(c[3]-c[5]*f)*e,a.d=(c[4]-c[5]*g)*e,a.tx=f,a.ty=g,b>=2&&(b===d.POINT?(a.a=1,a.b=0,a.c=0,a.d=1):b===d.AXIS_X?(a.c=-a.b,a.d=a.a):b===d.AXIS_Y&&(a.a=a.d,a.c=-a.b))},a.prototype.copyFrom=function(a){var b=this.mat3;return b[0]=a.a,b[1]=a.b,b[2]=0,b[3]=a.c,b[4]=a.d,b[5]=0,b[6]=a.tx,b[7]=a.ty,b[8]=1,this},a.prototype.setToMultLegacy=function(a,b){var c=this.mat3,d=b.mat3,e=a.a,f=a.b,g=a.c,h=a.d,i=a.tx,j=a.ty,k=d[0],l=d[1],m=d[2],n=d[3],o=d[4],p=d[5],q=d[6],r=d[7],s=d[8];return c[0]=k*e+l*g+m*i,c[1]=k*f+l*h+m*j,c[2]=m,c[3]=n*e+o*g+p*i,c[4]=n*f+o*h+p*j,c[5]=p,c[6]=q*e+r*g+s*i,c[7]=q*f+r*h+s*j,c[8]=s,this},a.prototype.setToMult2d=function(a,b){var c=this.mat3,d=a.mat3,e=b.mat3,f=d[0],g=d[1],h=d[2],i=d[3],j=d[4],k=d[5],l=d[6],m=d[7],n=d[8],o=e[0],p=e[1],q=e[2],r=e[3],s=e[4],t=e[5],u=e[6],v=e[7],w=e[8];return c[0]=o*f+p*i+q*l,c[1]=o*g+p*j+q*m,c[2]=o*h+p*k+q*n,c[3]=r*f+s*i+t*l,c[4]=r*g+s*j+t*m,c[5]=r*h+s*k+t*n,c[6]=u*f+v*i+w*l,c[7]=u*g+v*j+w*m,c[8]=u*h+v*k+w*n,this},a.IDENTITY=new a,a.TEMP_MATRIX=new a,a}(),a.Matrix2d=e}(pixi_projection||(pixi_projection={})),function(a){function b(a){var f,g,b=this.proj,c=this,d=a._worldID,e=c.localTransform;c._localID!==c._currentLocalID&&(e.a=c._cx*c.scale._x,e.b=c._sx*c.scale._x,e.c=c._cy*c.scale._y,e.d=c._sy*c.scale._y,e.tx=c.position._x-(c.pivot._x*e.a+c.pivot._y*e.c),e.ty=c.position._y-(c.pivot._x*e.b+c.pivot._y*e.d),c._currentLocalID=c._localID,b._currentProjID=-1),f=b._projID,b._currentProjID!==f&&(b._currentProjID=f,0!==f?b.local.setToMultLegacy(e,b.matrix):b.local.copyFrom(e),c._parentID=-1),c._parentID!==d&&(g=a.proj,g&&!g.affine?b.world.setToMult2d(g.world,b.local):b.world.setToMultLegacy(a.worldTransform,b.local),b.world.copy(c.worldTransform,b._affine),c._parentID=d,c._worldID++)}var c=new PIXI.Point,d=[new PIXI.Point,new PIXI.Point,new PIXI.Point,new PIXI.Point],e=new PIXI.Rectangle,f=new a.Matrix2d,g=function(g){function h(b,c){var d=g.call(this,b,c)||this;
return d.matrix=new a.Matrix2d,d.local=new a.Matrix2d,d.world=new a.Matrix2d,d._projID=0,d._currentProjID=-1,d._affine=a.AFFINE.NONE,d}return __extends(h,g),Object.defineProperty(h.prototype,"affine",{get:function(){return this._affine},set:function(a){this._affine!=a&&(this._affine=a,this._currentProjID=-1)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"enabled",{set:function(a){a!==this._enabled&&(this._enabled=a,a?(this.legacy.updateTransform=b,this.legacy._parentID=-1):(this.legacy.updateTransform=PIXI.TransformStatic.prototype.updateTransform,this.legacy._parentID=-1))},enumerable:!0,configurable:!0}),h.prototype.setAxisX=function(a,b){var c,d,e,f;void 0===b&&(b=1),c=a.x,d=a.y,e=Math.sqrt(c*c+d*d),f=this.matrix.mat3,f[0]=c/e,f[1]=d/e,f[2]=b/e,this._projID++},h.prototype.setAxisY=function(a,b){var c,d,e,f;void 0===b&&(b=1),c=a.x,d=a.y,e=Math.sqrt(c*c+d*d),f=this.matrix.mat3,f[3]=c/e,f[4]=d/e,f[5]=b/e,this._projID++},h.prototype.mapSprite=function(a,b){var c=a.texture;return e.x=-a.anchor.x*c.orig.width,e.y=-a.anchor.y*c.orig.height,e.width=c.orig.width,e.height=c.orig.height,this.mapQuad(e,b)},h.prototype.mapQuad=function(b,e){var g,h,i,j,k,l,m,n,o,p,q,r;d[0].set(b.x,b.y),d[1].set(b.x+b.width,b.y),d[2].set(b.x+b.width,b.y+b.height),d[3].set(b.x,b.y+b.height),g=1,h=2,i=3,j=a.utils.getIntersectionFactor(e[0],e[2],e[1],e[3],c),0!==j&&(g=1,h=3,i=2,k=Math.sqrt((e[0].x-c.x)*(e[0].x-c.x)+(e[0].y-c.y)*(e[0].y-c.y)),l=Math.sqrt((e[g].x-c.x)*(e[g].x-c.x)+(e[g].y-c.y)*(e[g].y-c.y)),m=Math.sqrt((e[h].x-c.x)*(e[h].x-c.x)+(e[h].y-c.y)*(e[h].y-c.y)),n=Math.sqrt((e[i].x-c.x)*(e[i].x-c.x)+(e[i].y-c.y)*(e[i].y-c.y)),o=(k+n)/n,p=(l+m)/m,q=(l+m)/l,r=this.matrix.mat3,r[0]=d[0].x*o,r[1]=d[0].y*o,r[2]=o,r[3]=d[g].x*p,r[4]=d[g].y*p,r[5]=p,r[6]=d[h].x*q,r[7]=d[h].y*q,r[8]=q,this.matrix.invert(),r=f.mat3,r[0]=e[0].x,r[1]=e[0].y,r[2]=1,r[3]=e[g].x,r[4]=e[g].y,r[5]=1,r[6]=e[h].x,r[7]=e[h].y,r[8]=1,this.matrix.setToMult2d(f,this.matrix),this._projID++)},h.prototype.clear=function(){this._currentProjID=-1,this._projID=0,this.matrix.identity()},h}(a.Projection);a.Projection2d=g}(pixi_projection||(pixi_projection={})),function(a){PIXI.Sprite.prototype.convertTo2d=function(){this.proj||(this.calculateVertices=a.Sprite2d.prototype.calculateVertices,this.calculateTrimmedVertices=a.Sprite2d.prototype.calculateTrimmedVertices,this._calculateBounds=a.Sprite2d.prototype._calculateBounds,this.proj=new a.Projection2d(this.transform),this.pluginName="sprite2d",this.vertexData=new Float32Array(12),Object.defineProperty(this,"worldTransform",{get:a.container2dWorldTransform,enumerable:!0,configurable:!0}))},PIXI.Container.prototype.convertTo2d=function(){this.proj||(this.proj=new a.Projection2d(this.transform),this.pluginName="sprite2d",Object.defineProperty(this,"worldTransform",{get:a.container2dWorldTransform,enumerable:!0,configurable:!0}))},PIXI.Container.prototype.convertSubtreeTo2d=function(){this.convertTo2d();for(var a=0;a<this.children.length;a++)this.children[a].convertSubtreeTo2d()}}(pixi_projection||(pixi_projection={})),function(a){var b=function(b){function c(c){var d=b.call(this,c)||this;return d.proj=new a.Projection2d(d.transform),d.pluginName="sprite2d",d.vertexData=new Float32Array(12),d}return __extends(c,b),c.prototype._calculateBounds=function(){this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)},c.prototype.calculateVertices=function(){var a,c,d,e,f,g,h,i,j,k,l,m;return this.proj._affine?(8!=this.vertexData.length&&(this.vertexData=new Float32Array(8)),b.prototype.calculateVertices.call(this),void 0):(12!=this.vertexData.length&&(this.vertexData=new Float32Array(12)),a=this.transform._worldID,c=this._texture._updateID,(this._transformID!==a||this._textureID!==c)&&(this._transformID=a,this._textureID=c,d=this._texture,e=this.proj.world.mat3,f=this.vertexData,g=d.trim,h=d.orig,i=this._anchor,j=0,k=0,l=0,m=0,g?(k=g.x-i._x*h.width,j=k+g.width,m=g.y-i._y*h.height,l=m+g.height):(k=-i._x*h.width,j=k+h.width,m=-i._y*h.height,l=m+h.height),f[0]=e[0]*k+e[3]*m+e[6],f[1]=e[1]*k+e[4]*m+e[7],f[2]=e[2]*k+e[5]*m+e[8],f[3]=e[0]*j+e[3]*m+e[6],f[4]=e[1]*j+e[4]*m+e[7],f[5]=e[2]*j+e[5]*m+e[8],f[6]=e[0]*j+e[3]*l+e[6],f[7]=e[1]*j+e[4]*l+e[7],f[8]=e[2]*j+e[5]*l+e[8],f[9]=e[0]*k+e[3]*l+e[6],f[10]=e[1]*k+e[4]*l+e[7],f[11]=e[2]*k+e[5]*l+e[8]),void 0)},c.prototype.calculateTrimmedVertices=function(){var a,c,d,e,f,g,h,i,j,k,l,m;if(this.proj._affine)return b.prototype.calculateTrimmedVertices.call(this),void 0;if(a=this.transform._worldID,c=this._texture._updateID,this.vertexTrimmedData){if(this._transformTrimmedID===a&&this._textureTrimmedID===c)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=a,this._textureTrimmedID=c,d=this._texture,e=this.vertexTrimmedData,f=d.orig,g=this._anchor,h=this.proj.world.mat3,i=-g._x*f.width,j=i+f.width,k=-g._y*f.height,l=k+f.height,m=1/(h[2]*i+h[5]*k+h[8]),e[0]=m*(h[0]*i+h[3]*k+h[6]),e[1]=m*(h[1]*i+h[4]*k+h[7]),m=1/(h[2]*j+h[5]*k+h[8]),e[2]=m*(h[0]*j+h[3]*k+h[6]),e[3]=m*(h[1]*j+h[4]*k+h[7]),m=1/(h[2]*j+h[5]*l+h[8]),e[4]=m*(h[0]*j+h[3]*l+h[6]),e[5]=m*(h[1]*j+h[4]*l+h[7]),m=1/(h[2]*i+h[5]*l+h[8]),e[6]=m*(h[0]*i+h[3]*l+h[6]),e[7]=m*(h[1]*i+h[4]*l+h[7])},Object.defineProperty(c.prototype,"worldTransform",{get:function(){return this.proj.affine?this.transform.worldTransform:this.proj.world},enumerable:!0,configurable:!0}),c}(PIXI.Sprite);a.Sprite2d=b}(pixi_projection||(pixi_projection={})),function(a){var b=a.webgl.MultiTextureSpriteRenderer,c=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.shaderVert="precision highp float;\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position.xyw = projectionMatrix * aVertexPosition;\n    gl_Position.z = 0.0;\n    \n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",b.shaderFrag="\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\nvec4 color;\nvec2 textureCoord = vTextureCoord;\nfloat textureId = floor(vTextureId+0.5);\n%forloop%\ngl_FragColor = color * vColor;\n}",b}return __extends(b,a),b.prototype.createVao=function(a){var c,d,b=this.shader.attributes;return this.vertSize=6,this.vertByteSize=4*this.vertSize,c=this.renderer.gl,d=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(a,b.aVertexPosition,c.FLOAT,!1,this.vertByteSize,0).addAttribute(a,b.aTextureCoord,c.UNSIGNED_SHORT,!0,this.vertByteSize,12).addAttribute(a,b.aColor,c.UNSIGNED_BYTE,!0,this.vertByteSize,16),b.aTextureId&&d.addAttribute(a,b.aTextureId,c.FLOAT,!1,this.vertByteSize,20),d},b.prototype.fillVertices=function(a,b,c,d,e,f){var i,g=d.vertexData,h=d._texture._uvs.uvsUint32;8===g.length?this.renderer.roundPixels?(i=this.renderer.resolution,a[c]=(0|g[0]*i)/i,a[c+1]=(0|g[1]*i)/i,a[c+2]=1,a[c+6]=(0|g[2]*i)/i,a[c+7]=(0|g[3]*i)/i,a[c+8]=1,a[c+12]=(0|g[4]*i)/i,a[c+13]=(0|g[5]*i)/i,a[c+14]=1,a[c+18]=(0|g[6]*i)/i,a[c+19]=(0|g[7]*i)/i,a[c+20]=1):(a[c]=g[0],a[c+1]=g[1],a[c+2]=1,a[c+6]=g[2],a[c+7]=g[3],a[c+8]=1,a[c+12]=g[4],a[c+13]=g[5],a[c+14]=1,a[c+18]=g[6],a[c+19]=g[7],a[c+20]=1):(a[c]=g[0],a[c+1]=g[1],a[c+2]=g[2],a[c+6]=g[3],a[c+7]=g[4],a[c+8]=g[5],a[c+12]=g[6],a[c+13]=g[7],a[c+14]=g[8],a[c+18]=g[9],a[c+19]=g[10],a[c+20]=g[11]),b[c+3]=h[0],b[c+9]=h[1],b[c+15]=h[2],b[c+21]=h[3],b[c+4]=b[c+10]=b[c+16]=b[c+22]=e,a[c+5]=a[c+11]=a[c+17]=a[c+23]=f},b}(b);PIXI.WebGLRenderer.registerPlugin("sprite2d",c)}(pixi_projection||(pixi_projection={})),function(a){var b=function(b){function c(c,d,e){var f=b.call(this,c,d,e)||this;return f.proj=new a.Projection2d(f.transform),f.pluginName="sprite2d",f.vertexData=new Float32Array(12),f}return __extends(c,b),Object.defineProperty(c.prototype,"worldTransform",{get:function(){return this.proj.affine?this.transform.worldTransform:this.proj.world},enumerable:!0,configurable:!0}),c}(PIXI.Text);a.Text2d=b,b.prototype.calculateVertices=a.Sprite2d.prototype.calculateVertices,b.prototype.calculateTrimmedVertices=a.Sprite2d.prototype.calculateTrimmedVertices,b.prototype._calculateBounds=a.Sprite2d.prototype._calculateBounds}(pixi_projection||(pixi_projection={})),function(a){function c(b,c){var d=this.alphaMaskPool[this.alphaMaskIndex];d||(d=this.alphaMaskPool[this.alphaMaskIndex]=[new a.SpriteMaskFilter2d(c)]),d[0].resolution=this.renderer.resolution,d[0].maskSprite=c,b.filterArea=c.getBounds(!0),this.renderer.filterManager.pushFilter(b,d),this.alphaMaskIndex++}var b=function(){function a(a){var b=this;this.onContextChange=function(a){b.gl=a,b.renderer.maskManager.pushSpriteMask=c},this.renderer=a,a.on("context",this.onContextChange)}return a.prototype.destroy=function(){this.renderer.off("context",this.onContextChange)},a}();a.ProjectionsManager=b,PIXI.WebGLRenderer.registerPlugin("projections",b)}(pixi_projection||(pixi_projection={})),function(a){var b="\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec3 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n	gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n	vTextureCoord = aTextureCoord;\n	vMaskCoord = otherMatrix * vec3( aTextureCoord, 1.0);\n}\n",c="\nvarying vec3 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    vec2 uv = vMaskCoord.xy / vMaskCoord.z;\n    \n    vec2 text = abs( uv - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, uv);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n",d=new a.Matrix2d,e=function(e){function f(d){var f=e.call(this,b,c)||this;return f.maskMatrix=new a.Matrix2d,d.renderable=!1,f.maskSprite=d,f}return __extends(f,e),f.prototype.apply=function(a,b,c,d,e){var g=this.maskSprite;this.uniforms.mask=g.texture,this.uniforms.otherMatrix=f.calculateSpriteMatrix(e,this.maskMatrix,g),this.uniforms.alpha=g.worldAlpha,a.applyFilter(this,b,c)},f.calculateSpriteMatrix=function(a,b,c){var e=c.proj,f=a.sourceFrame,g=a.renderTarget.size,h=e&&!e._affine?e.world.copyTo(d):d.copyFrom(c.transform.worldTransform),i=c.texture.orig;return b.set(g.width,0,0,g.height,f.x,f.y),h.invert(),b.setToMult2d(h,b),b.scaleAndTranslate(1/i.width,1/i.height,c.anchor.x,c.anchor.y),b},f}(PIXI.Filter);a.SpriteMaskFilter2d=e}(pixi_projection||(pixi_projection={})),function(a){var b;!function(a){function b(a){var d,e,b=6*a,c=new Uint16Array(b);for(d=0,e=0;b>d;d+=6,e+=4)c[d+0]=e+0,c[d+1]=e+1,c[d+2]=e+2,c[d+3]=e+0,c[d+4]=e+2,c[d+5]=e+3;return c}function c(a){return!(a&a-1||!a)}function d(a){return a+=+(0===a),--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1}function e(a){var b,c;return b=+(a>65535)<<4,a>>>=b,c=+(a>255)<<3,a>>>=c,b|=c,c=+(a>15)<<2,a>>>=c,b|=c,c=+(a>3)<<1,a>>>=c,b|=c,b|a>>1}function f(a,b,c,d,e){var m,n,o,p,f=b.x-a.x,g=c.x-d.x,h=c.x-a.x,i=b.y-a.y,j=c.y-d.y,k=c.y-a.y,l=f*j-i*g;return Math.abs(l)<1e-7?(e.x=f,e.y=i,0):(m=h*j-k*g,n=f*k-i*h,o=m/l,p=n/l,1e-6>p||p-1>-1e-6?-1:(e.x=a.x+o*(b.x-a.x),e.y=a.y+o*(b.y-a.y),1))}function g(a,b,c){var d,e,f,g;return c=c||new PIXI.Point,d=1-b.x,e=1-d,f=1-b.y,g=1-f,c.x=(a[0].x*d+a[1].x*e)*f+(a[3].x*d+a[2].x*e)*g,c.y=(a[0].y*d+a[1].y*e)*f+(a[3].y*d+a[2].y*e)*g,c}a.createIndicesForQuads=b,a.isPow2=c,a.nextPow2=d,a.log2=e,a.getIntersectionFactor=f,a.getPositionFromQuad=g}(b=a.utils||(a.utils={}))}(pixi_projection||(pixi_projection={})),PIXI.projection=pixi_projection;